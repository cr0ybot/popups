(function(){function t(){}function r(n,t){for(var i=n.length;i--;)if(n[i].listener===t)return i;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}var n=t.prototype,u=this,f=u.EventEmitter;n.getListeners=function(n){var r,t,i=this._getEvents();if("object"==typeof n){r={};for(t in i)i.hasOwnProperty(t)&&n.test(t)&&(r[t]=i[t])}else r=i[n]||(i[n]=[]);return r};n.flattenListeners=function(n){for(var i=[],t=0;n.length>t;t+=1)i.push(n[t].listener);return i};n.getListenersAsObject=function(n){var t,i=this.getListeners(n);return i instanceof Array&&(t={},t[n]=i),t||i};n.addListener=function(n,t){var i,u=this.getListenersAsObject(n),f="object"==typeof t;for(i in u)u.hasOwnProperty(i)&&-1===r(u[i],t)&&u[i].push(f?t:{listener:t,once:!1});return this};n.on=i("addListener");n.addOnceListener=function(n,t){return this.addListener(n,{listener:t,once:!0})};n.once=i("addOnceListener");n.defineEvent=function(n){return this.getListeners(n),this};n.defineEvents=function(n){for(var t=0;n.length>t;t+=1)this.defineEvent(n[t]);return this};n.removeListener=function(n,t){var f,i,u=this.getListenersAsObject(n);for(i in u)u.hasOwnProperty(i)&&(f=r(u[i],t),-1!==f&&u[i].splice(f,1));return this};n.off=i("removeListener");n.addListeners=function(n,t){return this.manipulateListeners(!1,n,t)};n.removeListeners=function(n,t){return this.manipulateListeners(!0,n,t)};n.manipulateListeners=function(n,t,i){var r,u,f=n?this.removeListener:this.addListener,e=n?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=i.length;r--;)f.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(u=t[r])&&("function"==typeof u?f.call(this,r,u):e.call(this,r,u));return this};n.removeEvent=function(n){var t,r=typeof n,i=this._getEvents();if("string"===r)delete i[n];else if("object"===r)for(t in i)i.hasOwnProperty(t)&&n.test(t)&&delete i[t];else delete this._events;return this};n.removeAllListeners=i("removeEvent");n.emitEvent=function(n,t){var i,f,r,e,u=this.getListenersAsObject(n);for(r in u)if(u.hasOwnProperty(r))for(f=u[r].length;f--;)i=u[r][f],i.once===!0&&this.removeListener(n,i.listener),e=i.listener.apply(this,t||[]),e===this._getOnceReturnValue()&&this.removeListener(n,i.listener);return this};n.trigger=i("emitEvent");n.emit=function(n){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,t)};n.setOnceReturnValue=function(n){return this._onceReturnValue=n,this};n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};n._getEvents=function(){return this._events||(this._events={})};t.noConflict=function(){return u.EventEmitter=f,t};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(n){function f(t){var i=n.event;return i.target=i.target||i.srcElement||t,i}var t=document.documentElement,r=function(){},i,u;t.addEventListener?r=function(n,t,i){n.addEventListener(t,i,!1)}:t.attachEvent&&(r=function(n,t,i){n[t+i]=i.handleEvent?function(){var t=f(n);i.handleEvent.call(i,t)}:function(){var t=f(n);i.call(n,t)};n.attachEvent("on"+t,n[t+i])});i=function(){};t.removeEventListener?i=function(n,t,i){n.removeEventListener(t,i,!1)}:t.detachEvent&&(i=function(n,t,i){n.detachEvent("on"+t,n[t+i]);try{delete n[t+i]}catch(r){n[t+i]=void 0}});u={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",u):n.eventie=u}(this),function(n,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,r){return t(n,i,r)}):"object"==typeof exports?module.exports=t(n,require("wolfy87-eventemitter"),require("eventie")):n.imagesLoaded=t(n,n.EventEmitter,n.eventie)}(window,function(n,t,i){function s(n,t){for(var i in t)n[i]=t[i];return n}function c(n){return"[object Array]"===v.call(n)}function l(n){var t=[],i,r;if(c(n))t=n;else if("number"==typeof n.length)for(i=0,r=n.length;r>i;i++)t.push(n[i]);else t.push(n);return t}function r(n,t,i){if(!(this instanceof r))return new r(n,t);"string"==typeof n&&(n=document.querySelectorAll(n));this.elements=l(n);this.options=s({},this.options);"function"==typeof t?i=t:s(this.options,t);i&&this.on("always",i);this.getImages();f&&(this.jqDeferred=new f.Deferred);var u=this;setTimeout(function(){u.check()})}function e(n){this.img=n}function u(n){this.src=n;o[n]=this}var f=n.jQuery,h=n.console,a=h!==void 0,v=Object.prototype.toString,o;return r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){var i,u,n,t,e;for(this.images=[],i=0,u=this.elements.length;u>i;i++)if(n=this.elements[i],"IMG"===n.nodeName&&this.addImage(n),t=n.nodeType,t&&(1===t||9===t||11===t))for(var f=n.querySelectorAll("img"),r=0,o=f.length;o>r;r++)e=f[r],this.addImage(e)},r.prototype.addImage=function(n){var t=new e(n);this.images.push(t)},r.prototype.check=function(){function f(n,r){return t.options.debug&&a&&h.log("confirm",n,r),t.progress(n),u++,u===i&&t.complete(),!0}var t=this,u=0,i=this.images.length,n,r;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(n=0;i>n;n++)r=this.images[n],r.on("confirm",f),r.check()},r.prototype.progress=function(n){this.hasAnyBroken=this.hasAnyBroken||!n.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,n);t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,n)})},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done",n;this.isComplete=!0;n=this;setTimeout(function(){if(n.emit(t,n),n.emit("always",n),n.jqDeferred){var i=n.hasAnyBroken?"reject":"resolve";n.jqDeferred[i](n)}})},f&&(f.fn.imagesLoaded=function(n,t){var i=new r(this,n,t);return i.jqDeferred.promise(f(this))}),e.prototype=new t,e.prototype.check=function(){var n=o[this.img.src]||new u(this.img.src),t;if(n.isConfirmed)return this.confirm(n.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;t=this;n.on("confirm",function(n,i){return t.confirm(n.isLoaded,i),!0});n.check()},e.prototype.confirm=function(n,t){this.isLoaded=n;this.emit("confirm",this,t)},o={},u.prototype=new t,u.prototype.check=function(){if(!this.isChecked){var n=new Image;i.bind(n,"load",this);i.bind(n,"error",this);n.src=this.src;this.isChecked=!0}},u.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},u.prototype.onload=function(n){this.confirm(!0,"onload");this.unbindProxyEvents(n)},u.prototype.onerror=function(n){this.confirm(!1,"onerror");this.unbindProxyEvents(n)},u.prototype.confirm=function(n,t){this.isConfirmed=!0;this.isLoaded=n;this.emit("confirm",this,t)},u.prototype.unbindProxyEvents=function(n){i.unbind(n.target,"load",this);i.unbind(n.target,"error",this)},r}),function(n){"use strict";function t(t,i,r,u,f){var e={url:spuvar.ajax_url,data:t,cache:!1,type:"POST",dataType:"json",timeout:3e4},f=f||!1,r=r||!1,u=u||!1;i&&(e.url=i);r&&(e.success=r);u&&(e.error=u);f&&(e.dataType=f);n.ajax(e)}function h(n,t,i){var r,u;i?(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString()):u="";document.cookie=n+"="+t+u+"; path=/"}function c(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null}function l(){try{FB.Event.subscribe("edge.create",function(t,i){var r=n(i).parents(".spu-box").data("box-id");r&&SPU.hide(r,!1,!0)})}catch(t){}i=!0;clearInterval(u)}function f(t){var i=n(t.target).parents(".spu-box").data("box-id");i&&SPU.hide(i,!1,!0)}function a(){if(spuvar_social.facebook)try{FB.XFBML.parse()}catch(n){}if(spuvar_social.google)try{gapi.plusone.go()}catch(n){}if(spuvar_social.twitter)try{twttr.widgets.load()}catch(n){}}function v(){n(".spu-box form").each(function(){var t=n(this).attr("action");t&&n(this).attr("action",t.replace("?spu_action=spu_load",""))});n.fn.wpcf7InitForm&&n(".spu-box div.wpcf7 > form").wpcf7InitForm()}var r=function(){function u(t){var i=r[t],e=n(window).width(),o=n(window).height(),s=i.outerHeight(),c=i.outerWidth(),l=i.data("width"),h=0,u=o/2-s/2,f="fixed",a=n(document).scrollTop();i.hasClass("spu-centered")&&(l<e&&(h=e/2-c/2),i.css({left:h,position:f,top:u}));s+50>o&&(f="absolute",u=a,i.css({position:f,top:u,bottom:"auto"}))}function o(t){var i=n(t).find(".spu-facebook"),u,r;i.length&&(u=i.find(".fb-like > span").width(),u==0&&(r=i.find(".fb-like").data("layout"),r=="box_count"?i.append('<style type="text/css"> #'+n(t).attr("id")+" .fb-like iframe, #"+n(t).attr("id")+" .fb_iframe_widget span, #"+n(t).attr("id")+" .fb_iframe_widget{ height: 63px !important;width: 80px !important;}<\/style>"):r=="button_count"?i.append('<style type="text/css"> #'+n(t).attr("id")+" .fb-like iframe, #"+n(t).attr("id")+" .fb_iframe_widget span, #"+n(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;min-width: 120px !important;}<\/style>"):i.append('<style type="text/css"> #'+n(t).attr("id")+" .fb-like iframe, #"+n(t).attr("id")+" .fb_iframe_widget span, #"+n(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;width: 80px !important;}<\/style>")))}function s(t){var i=t,r=i.data("total");if(r){a();var u=0,f=0,e=i.outerWidth(),o=i.find(".spu-content").width();!spuvar.disable_style&&n(window).width()>e&&(i.find(".spu-shortcode").wrapAll('<div class="spu_shortcodes"/>'),i.find(".spu-shortcode").each(function(){u=u+n(this).outerWidth()}),f=o-u-r*20);f>0&&(i.find(".spu-shortcode").each(function(){n(this).css("margin-left",f/2)}),r==2?i.find(".spu-shortcode").last().css("margin-left",0):r==3&&i.find(".spu-shortcode").first().css("margin-left",0))}}function i(t,i,f){var e=r[t],l=n("#spu-bg-"+t),v=e.data("bgopa"),c,a,o;return e.is(":animated")?!1:i===!0&&e.is(":visible")||i===!1&&e.is(":hidden")?!1:(i===!1?(c=parseInt(e.data("cookie")),c>0&&h("spu_box_"+t,!0,c),e.trigger("spu.box_close",[t])):(setTimeout(function(){s(e)},1500),e.trigger("spu.box_open",[t]),n(window).resize(function(){u(t)}),u(t)),a=e.data("spuanimation"),o=e.data("close-on-conversion"),a==="fade"?i===!0?e.fadeIn("slow"):i===!1&&(o&&f||!f)&&e.fadeOut("slow"):i===!0?e.slideDown("slow"):i===!1&&(o&&f||!f)&&e.slideUp("slow"),i===!0&&v>0?l.fadeIn():i===!1&&(o&&f||!f)&&l.fadeOut(),i)}var f=n(window).height(),e=spuvar.is_admin,r=[];return n(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),n(".spu-box").each(function(){var p,w,k,l,y,d;spuvar.safe_mode&&n(this).prependTo("body");var s=n(this),a=s.data("trigger"),h=0,g=parseInt(s.data("test-mode"))===1,u=s.data("box-id"),nt=parseInt(s.data("auto-hide"))===1,ft=parseInt(s.data("seconds-close")),tt=parseInt(s.data("trigger-number"),10),it=a=="percentage"?parseInt(s.data("trigger-number"),10)/100:.8,rt=it*n(document).height();o(s);s.on("click",'a:not(".spu-close-popup, .flp_wrapper a, .spu-not-close")',function(){i(u,!1,!0)});n(document).keyup(function(n){n.keyCode==27&&i(u,!1,!1)});p=navigator.userAgent;w=p.match(/iPad/i)||p.match(/iPhone/i)?"touchstart":"click";n("body").on(w,function(n){n.originalEvent!==undefined&&i(u,!1,!1)});n("body").on(w,".spu-box,.spu-clickable",function(n){n.stopPropagation()});s.hide().css("left","");r[u]=s;var v=function(){h&&clearTimeout(h);h=window.setTimeout(function(){var t=n(window).scrollTop(),r=t+f>=rt;r?(nt||n(window).unbind("scroll",v),i(u,!0,!1)):i(u,!1,!1)},100)},ut=function(){h&&clearTimeout(h);h=window.setTimeout(function(){i(u,!0,!1)},tt*1e3)},b=c("spu_box_"+u);(b==undefined||b==""||e&&g)&&(a=="seconds"&&ut(),a=="percentage"&&(n(window).bind("scroll",v),v()),window.location.hash&&window.location.hash.length>0&&(k=window.location.hash,k.substring(1)===s.attr("id")&&setTimeout(function(){i(u,!0,!1)},100)));s.on("click",".spu-close-popup",function(){i(u,!1,!1);a=="percentage"&&n(window).unbind("scroll",v)});if(n('a[href="#spu-'+u+'"]').on("click",function(n){n.preventDefault();i(u,!0,!1)}).css("cursor","pointer").addClass("spu-clickable"),s.find(".gform_wrapper form").addClass("gravity-form"),s.find(".mc4wp-form form").addClass("mc4wp-form"),s.find(".newsletter form").addClass("newsletter-form"),l=s.find("form"),l.length){l.is(".newsletter-form, .wpcf7-form, .gravity-form, .infusion-form, .widget_wysija, .ninja-forms-form")||(y=l.attr("action"),d=new RegExp(spuvar.site_url,"i"),y&&y.length&&(d.test(y)||l.addClass("spu-disable-ajax")));n(".spu-disable-ajax form").length&&n(".spu-disable-ajax form").addClass("spu-disable-ajax");s.on("submit",'form.spu-disable-ajax:not(".flp_form")',function(){s.trigger("spu.form_submitted",[u]);i(u,!1,!0)});s.on("submit",'form:not(".newsletter-form, .wpcf7-form, .gravity-form, .infusion-form, .spu-disable-ajax, .widget_wysija, .ninja-forms-form, .flp_form, .mc4wp-form")',function(r){r.preventDefault();var f=n(this),e=f.serialize(),o=f.attr("action"),h=function(n,t,i){console.log("Spu Form error: "+t+" - "+i)},c=function(t){var r=n(t).filter("#spu-"+u).html();n("#spu-"+u).html(r);n("#spu-"+u).find(".mc4wp-form-error").length||setTimeout(function(){i(u,!1,!0)},spuvar.seconds_confirmation_close*1e3)};return t(e,o,c,h,"html"),s.trigger("spu.form_submitted",[u]),!0});n("body").on("mailsent.wpcf7",function(){s.trigger("spu.form_submitted",[u]);i(u,!1,!0)});n(document).on("gform_confirmation_loaded",function(){s.trigger("spu.form_submitted",[u]);i(u,!1,!0)});s.on("submit",".infusion-form",function(n){n.preventDefault();s.trigger("spu.form_submitted",[u]);i(u,!1,!0);this.submit()});s.on("submit",".newsletter-form",function(n){n.preventDefault();s.trigger("spu.form_submitted",[u]);i(u,!1,!0);this.submit()});n("body").on("submitResponse.default",function(){s.trigger("spu.form_submitted",[u]);i(u,!1,!0)})}}),{show:function(n){return i(n,!0,!1)},hide:function(n,t,r){return i(n,!1,r)},request:function(n,i,r,u){return t(n,i,r,u)}}},i,u;if(spuvar.ajax_mode){var e={pid:spuvar.pid,referrer:document.referrer,is_category:spuvar.is_category,is_archive:spuvar.is_archive},o=function(t){n("body").append(t);n(".spu-box").imagesLoaded(function(){window.SPU=r();v()})},s=function(n,t,i){console.log("Problem loading popups - error: "+t+" - "+i)};t(e,spuvar.ajax_mode_url,o,s,"html")}else n(".spu-box").imagesLoaded(function(){window.SPU=r()});if(i=!1,u=setInterval(function(){typeof FB=="undefined"||i||l()},1e3),typeof twttr!="undefined")try{twttr.ready(function(n){n.events.bind("tweet",f);n.events.bind("follow",f)})}catch(y){}}(jQuery)